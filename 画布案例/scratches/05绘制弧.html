<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>绘制弧</title>
</head>
<body>
<div id="container">
    <canvas id="cavsElem">
        你的浏览器太垃圾了，请升级你的浏览器
    </canvas>
</div>

<script>
    (function (){
        var canvas = document.getElementById("cavsElem")
        var ctx = canvas.getContext('2d')
        canvas.width = 600
        canvas.height = 600
        canvas.style.border = "1px solid red"

        // 绘制一条从0到30度的弧
        // 弧度和角度的转换公式 rad = 30*Math.PI / 180
        // ctx.moveTo(300,300)
        // // ctx.arc(x,y,r,s,e,true)第一二个参数是横纵坐标，即圆心，第三个参数是半径，第四五个参数是起始角度和终止角度,第六个参数是否
        // // 逆时针，true是，false否，默认是false
        // ctx.arc(300,300,100,0*Math.PI/180,30*Math.PI/180,true)
        // ctx.closePath()
        // ctx.fill()
        // ctx.stroke()


        // 绘制饼图，一般绘图从-90读开始绘制
        var data = [
            {
            value:.2,
            color:"red",
            title:"应届生"
            },
            {
                value:.3,
                color:"blue",
                title:"社会招生"
            },
            {
                value:.4,
                color:"green",
                title:"老学员推荐"
            },
            {
                value:.1,
                color:"#ccc",
                title:"公开课"
            }]
        var tempAngle = -90 //从-90度开始绘制，也就是起始角度是-90
        var x0 = 400,y0=400 //横纵坐标，圆心
        var radius = 200 //半径
        for(var i=0;i<data.length;i++){
            ctx.beginPath()
            ctx.moveTo(x0,y0)
            var angle = data[i].value *360 //当前扇形的角度
            ctx.fillStyle = data[i].color
            var startAngle = tempAngle *Math.PI /180 //起始弧度
            var endAngle = (tempAngle +angle)*Math.PI /180 //终止弧度
            ctx.arc(x0,y0,radius,startAngle,endAngle)
            ctx.fill()
            tempAngle += angle
        }
    }())
</script>
</body>
</html>